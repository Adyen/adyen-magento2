<?xml version="1.0"?>
<!--
/**
 *
 * Adyen Payment module (https://www.adyen.com/)
 *
 * Copyright (c) 2023 Adyen N.V. (https://www.adyen.com/)
 * See LICENSE.txt for license details.
 *
 * Author: Adyen <magento@adyen.com>
 */
-->
<include xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_include.xsd">
    <group id="adyen_capture_settings" translate="label" type="text" sortOrder="100" showInDefault="1" showInWebsite="1"
           showInStore="1">
        <label><![CDATA[Capture settings]]></label>
        <frontend_model>Magento\Config\Block\System\Config\Form\Fieldset</frontend_model>
        <comment>
            <![CDATA[You can configure to capture payments automatically, manually, with a capture delay, or upon shipment. The capture settings you configure here must match your <a target="_blank" href="https://docs.adyen.com/online-payments/capture">capture settings in the Adyen Customer Area.</a>]]>
        </comment>
        <field id="capture_mode" translate="label" type="select" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>Capture delay</label>
            <tooltip>Immediate is the default. Set to manual if you want to capture funds manually later. This setting affects cards and alternative payment methods that are not open invoice payment methods. If you have selected a capture delay of a couple of days in Adyen keep, set it to immediate.</tooltip>
            <source_model>Adyen\Payment\Model\Config\Source\CaptureMode</source_model>
            <config_path>payment/adyen_abstract/capture_mode</config_path>
        </field>
        <field id="capture_for_openinvoice" translate="label" type="select" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>Capture for open invoice payment methods</label>
            <tooltip>Applicable for Klarna, Afterpay Touch, Ratepay, FacilyPay/Oney, Affirm, Clearpay, Zip and PayBright. Open invoice methods are set to manual capture by default. If you want auto capture, please contact support@adyen.com. After approval, set this field to 'Immediate'. If you want to do a request capture on shipment, set this field to 'On shipmentâ€™.</tooltip>
            <source_model>Adyen\Payment\Model\Config\Source\OpenInvoiceCaptureMode</source_model>
            <config_path>payment/adyen_abstract/capture_for_openinvoice</config_path>
        </field>
        <field id="paypal_capture_mode" translate="label" type="select" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>Manual capture for PayPal</label>
            <tooltip>No is the default setting. If you have requested the Adyen Support team to enable manual capture for PayPal for your account, set to Yes.</tooltip>
            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
            <config_path>payment/adyen_abstract/paypal_capture_mode</config_path>
        </field>
        <field id="sepa_flow" translate="label" type="select" sortOrder="50" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>Capture for SEPA</label>
            <tooltip>Sale is the default setting where SEPA payments are automatically captured. If you set this to Auth/Cap, the plugin uses the capture delay you set in the Adyen Customer Area.</tooltip>
            <source_model>Adyen\Payment\Model\Config\Source\SepaFlow</source_model>
            <config_path>payment/adyen_abstract/sepa_flow</config_path>
        </field>
    </group>
</include>
